<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head.ejs') %>
  <body>
    <%- include('./partials/nav.ejs') %>
    <div class="detail content">
      <h2>Details</h2>
        
      <div>
        <h3><%= blog.title %></h3>
      <div><p><%= blog.body %></p></div>
       <a class="delete" data-doc="<%= blog._id %>" >delete</a>
      </div>

    <%- include('./partials/footer.ejs') %>

    <script>
      const trashCan = document.querySelector('a.delete')

      trashCan.addEventListener('click', (e)=>{
        const endpoint = `/blogs/${trashCan.dataset.doc}`;

        fetch(endpoint, {
          method: 'DELETE'
        }).then((response)=>{
          response.json().then(data => window.location.href = data.redirect)

        }).catch(err =>console.log(err))
      })
    </script>
  </body>
</html>
